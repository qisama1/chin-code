# count为什么这么慢

最开始的时候，我也很单纯的认为，count就是简简单单获取一个值。
但是现在看来并不是这样的。

## count(*)做了什么
1. innodb中是一行一行的去累加得到值 **同时count(*)进行了优化，会选取占位最小的那个索引树去读取**
2. MyISAM由于它没有事务所以它有一个值去获取

## 为什么count(*)这样做
原因很简单，因为有事务的存在，可能每个事务中的count(*)的值是不同的。那么每一次都需要重新去读一次。

## 对比count(1), count(id), count(字段), count(*)的性能

### count(1)
count(1), 给每行多一个字段1，然后进行累计，所以它不会进行字段的读取，效率较高
### count(id)
count(id), 那么它就要获取字段，但是由于id一定是非空的，所以每次不用去判断是不是空的。
### count(字段)
对于字段来说，它就要去判断是不是有非空约束，没有非空约束的话就需要去判断字段是否为空了
### count(*)
count(*)它是Innodb中优化最多的东西，它首先会选择占位最少的索引树，其次他并不会提取出字段来判断，所以他的效率也是比较高的

### 总而言之
总而言之，count(字段) < count(id) < count(*) ~= count(1)