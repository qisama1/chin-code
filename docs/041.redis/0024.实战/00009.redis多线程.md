# redis多线程连环问

## 1. redis6.0版本前真的是单线程吗？
并不是，redis6.0版本之前采用的是单线程reactor模型进行io读取，然后单线程执行请求。但是仍然有其他线程去执行如bgsave这样的操作。

## 2. redis6.0版本前为什么不引入多线程?

1. 大多数情况下，并不是受限于网络，而是受限于内存
2. 多线程注定要带来上下文的切换，在单线程可以hold住的情况下，单线程比起多线程可能会更简单并且更快。

## 3. redis6.0为什么要引入多线程？
对于一些热点数据，可能集群也无法应付了，那么就需要引入多线程对网络io进行优化。

## 4. redis6.0是不是默认开启多线程
不是

## 5. 开启多线程提升效果如何？
能提升一倍多

## 6. redis6.0多线程实现逻辑
1. redis获取连接请求，并且把socket放入等待处理的队列中
2. redis用一个IO线程去处理redis的网络io数据读取
3. redis阻塞式等待IO线程读取完成
4. redis通过单线程的方式完成请求命令，返回请求结果
5. 阻塞式等待IO线程写回数据
6. 将socket从等待队列中移除

## 7. redis6.0后开启多线程是否会有线程安全问题
没有，它只在IO读取这块是多线程的，真正到业务处理的时候是单线程的。