# 直接内存

## 直接内存比堆内存快在哪里
避免了二次不必要的拷贝。
### TCP缓冲区
每个TCP的socket的内核中都有一个发送缓冲区和一个接受缓冲区。

### buffer放在堆上
会在堆外空间开辟一个应用进程缓冲区，会把这个数据拷贝在这里，再去发送。

由于JVM是存在GC的，而发送过程使用了DMA技术，是与CPU异步的，那么这样可能会出现压缩性的GC了导致数据发生了变化。
### buffer放在直接内存上
无需拷贝数据

## DMA
在没有DMA之前，是需要CPU去把内核态中的数据给拷贝到网卡中的，这样肯定是浪费CPU，那么有人就设计这么一种东西，可以并行地去把内核态的缓冲区数据给拷贝到网卡中而不占用CPU时间。