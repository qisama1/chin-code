# 内存分配策略

1. **新对象进入新生代（大对象可以直接进入老年代）**
2. 长期存在的对象应该进入老年代（15岁了以后进入老年代） -MaxTenurningThreshold
3. 如果相同年龄的对象占据了survivor区的一半以上，那么这个年龄的对象可以直接进入老年代。这个机制可能会导致老年代有过多的对象，从而full gc。

## 空间分配担保策略

判断老年代的最大连续空间是否可以容纳新生代的所有对象。

1. 空间可以容纳：直接允许MGC
2. 空间不足以：检查HandlePromotionFailure，检查历次晋升到老年代的平均大小，就开启一次有风险的MGC。
3. 如果仍然不行，就进行FULL GC
4. 如果参数是关闭的，直接进行FGC