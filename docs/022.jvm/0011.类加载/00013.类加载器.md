# 类加载器

想到类加载器就要想到三个问题

## 1. 有什么类加载器
BootStrap启动类加载器 -> Extension类加载器 -> Application类加载器

### BootStrap启动类加载器
启动类加载器是加载%JAVA_HOME%/lib目录下的类（或者-Xbootclasspath），它的实现是用c/c++的，所以在java中显示类加载器为null
### Extension扩展类加载器
Extension扩展类加载器是加载%JAVA_HOME%/lib/ext目录下的类(或者在java.ext.dirs系统变量下的目录)
### Application应用程序类加载器
Application类加载器负责加载用户类路径下的所有类库，开发者可以直接在代码中使用这个类加载器，如果没有指定类加载器，一般就是使用这个加载器。
## 2. 双亲委派机制
双亲委派机制其实就是在类加载器的loadClass方法当中的选用类加载器的逻辑。
一句话概况就是向上委托，向下委派。先让父类去加载，加载不了再给子类去加载，这样可以唯一确认一个类的类加载器，同时Java类的唯一确认类型是通过和类加载器绑定的。
## 3. 破坏双亲委派机制
破坏双亲委派机制其实很简单，就是自定义loadClass方法，把它自己的双亲委派的方式改掉就好了。而目前为了防止这种行为，推荐的是使用findClass这个对外提供的方法接口，这样可以自定义的去实现类加载方式但不破坏双亲委派机制。

## 什么时候需要自定义类加载器
1. 有些公司它为了安全考虑，对class文件进行了一次加密，正常的类加载器是无法解析的，要自定义类加载器去先做解密。
2. 一些从网络中、zip文件中、db存储中获取class的方式，就需要特殊的类加载器。